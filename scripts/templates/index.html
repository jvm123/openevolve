<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OpenEvolve Evolution Visualizer</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <div id="toolbar">
        <div style="display:flex;flex-direction:column;min-width:220px;">
            <span style="font-size:1.1em;font-weight:bold;">OpenEvolve Evolution Visualizer</span>
            <span id="checkpoint-label" style="font-size:0.9em;color:#888;">Checkpoint: None</span>
        </div>
        <div class="tabs" style="margin-left:1.5em;">
            <div class="tab active" id="tab-branching">Branching</div>
            <div class="tab" id="tab-list">List</div>
            <div class="tab" id="tab-performance">Performance</div>
            <div class="tab" id="tab-prompts">Prompts</div>
        </div>
        <label class="toolbar-label" for="metric-select" style="margin-left:2em;">Metric:</label>
        <select id="metric-select" style="font-size:1em;margin-left:0.5em;">
            <option value="combined_score" selected>combined_score</option>
        </select>
        <label class="toolbar-label" for="highlight-select"
               style="margin-left:2em;">
            Highlight:
        </label>
        <select id="highlight-select" style="font-size:1em;margin-left:0.5em;">
            <option value="best" selected>Best</option>
            <option value="first">First</option>
            <option value="failed">Failed</option>
        </select>
        <div style="margin-left:auto;display:flex;align-items:center;cursor:pointer;gap:0.3em;min-width:120px;">
            <label style="margin:0;display:flex;align-items:center;gap:0.3em;">Dark mode:</label>
            <input type="checkbox" id="darkmode-toggle" style="accent-color:#0074d9;">
            <span id="darkmode-label" style="font-size:1.1em;">ðŸŒ™</span>
        </div>
    </div>
    <div id="sidebar">
        <div id="sidebar-content">
            <span style="color:#888;">
                Select a node to see details.
            </span>
        </div>
    </div>
    <div id="view-branching" class="active" style="padding-top:3.5em;">
        <div id="graph"></div>
    </div>
    <div id="view-list" style="display:none;padding-top:3.5em;">
        <div style="display:flex;align-items:center;gap:1em;margin-bottom:1em;">
            <input id="list-search" type="text" placeholder="Search Program ID..." style="font-size:1em;padding:0.4em 1em;border-radius:6px;border:1px solid #ccc;min-width:220px;">
            <select id="list-sort" style="font-size:1em;padding:0.3em 1em;border-radius:6px;border:1px solid #ccc;">
                <option value="id">Sort by ID</option>
                <option value="generation">Sort by Generation</option>
                <option value="island">Sort by Island</option>
            </select>
        </div>
        <div id="node-list-container"></div>
    </div>
    <div id="view-performance" style="padding-top:3.5em;"></div>
    <div id="view-prompts" style="padding-top:3.5em;"></div>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>